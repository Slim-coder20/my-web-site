{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/BuyButton/BuyButton.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"buyButton\": \"BuyButton-module__3jIF6a__buyButton\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA"}},
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Slim%20Backup/Projets/Dossier%20Professionel%20Studi%202026%20/slim_site_internet/my-web-site/components/BuyButton/BuyButton.tsx"],"sourcesContent":["/**\n * Composant : BuyButton\n *\n * Ce composant affiche le bouton \"Acheter\" sur chaque carte d'album\n * dans la page discographie.\n *\n * FONCTIONNALITÉ :\n * - Au clic, redirige l'utilisateur vers la page de récapitulatif de commande\n * - La page de checkout gérera ensuite la saisie de l'email et le paiement\n *\n * NOTE : Ce composant est un Client Component (\"use client\") car il utilise\n * le hook useRouter de Next.js pour la navigation.\n */\n\n\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport styles from \"./BuyButton.module.css\";\n\ninterface BuyButtonProps {\n  productId: number; // ID de l'album à acheter\n  productTitle: string; // Titre de l'album (non utilisé pour l'instant mais peut servir pour l'accessibilité)\n}\n\nexport default function BuyButton({ productId }: BuyButtonProps) {\n  const router = useRouter();\n\n  /**\n   * Gestion du clic sur le bouton \"Acheter\"\n   *\n   * Redirige vers la page de checkout avec l'ID du produit.\n   * Exemple : /checkout/1 pour l'album avec l'ID 1\n   */\n  const handleClick = () => {\n    router.push(`/checkout/${productId}`);\n  };\n\n  return (\n    <button className={styles.buyButton} onClick={handleClick}>\n      Acheter\n    </button>\n  );\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;CAYC;;;;;AAID;AACA;AAHA;;;;AAUe,SAAS,UAAU,EAAE,SAAS,EAAkB;IAC7D,MAAM,SAAS,IAAA,+IAAS;IAExB;;;;;GAKC,GACD,MAAM,cAAc;QAClB,OAAO,IAAI,CAAC,CAAC,UAAU,EAAE,WAAW;IACtC;IAEA,qBACE,8OAAC;QAAO,WAAW,2JAAM,CAAC,SAAS;QAAE,SAAS;kBAAa;;;;;;AAI/D"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Slim%20Backup/Projets/Dossier%20Professionel%20Studi%202026%20/slim_site_internet/my-web-site/components/PaymentVerifier/PaymentVerifier.tsx"],"sourcesContent":["/**\n * Composant : PaymentVerifier\n *\n * Ce composant vérifie le statut d'un paiement Stripe après la redirection\n * depuis Stripe Checkout et met à jour la commande si nécessaire.\n *\n * UTILISATION :\n * Ajouté à la page discographie pour vérifier automatiquement le paiement\n * quand success=true est dans l'URL.\n */\n\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"next/navigation\";\n\nexport default function PaymentVerifier() {\n  const searchParams = useSearchParams();\n  const [status, setStatus] = useState<\"checking\" | \"success\" | \"error\" | null>(\n    null\n  );\n  const [message, setMessage] = useState<string>(\"\");\n\n  useEffect(() => {\n    const sessionId = searchParams.get(\"session_id\");\n\n    // Si pas de session_id dans l'URL, ne rien faire\n    if (!sessionId) {\n      return;\n    }\n\n    // Vérifier le statut du paiement\n    const verifyPayment = async () => {\n      setStatus(\"checking\");\n      setMessage(\"Vérification du paiement...\");\n\n      try {\n        const response = await fetch(\"/api/stripe/verify-payment\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ sessionId }),\n        });\n\n        const data = await response.json();\n\n        if (response.ok && data.status === \"paid\") {\n          setStatus(\"success\");\n          setMessage(\"Paiement confirmé ! Vous recevrez un email de confirmation.\");\n        } else {\n          setStatus(\"error\");\n          setMessage(data.message || \"Erreur lors de la vérification du paiement\");\n        }\n      } catch (error) {\n        console.error(\"Erreur lors de la vérification du paiement:\", error);\n        setStatus(\"error\");\n        setMessage(\"Erreur lors de la vérification du paiement\");\n      }\n    };\n\n    verifyPayment();\n  }, [searchParams]);\n\n  if (!status) {\n    return null;\n  }\n\n  return (\n    <div\n      style={{\n        padding: \"1rem\",\n        margin: \"1rem 0\",\n        borderRadius: \"4px\",\n        backgroundColor:\n          status === \"success\"\n            ? \"#d4edda\"\n            : status === \"error\"\n            ? \"#f8d7da\"\n            : \"#d1ecf1\",\n        color:\n          status === \"success\"\n            ? \"#155724\"\n            : status === \"error\"\n            ? \"#721c24\"\n            : \"#0c5460\",\n        border: `1px solid ${\n          status === \"success\"\n            ? \"#c3e6cb\"\n            : status === \"error\"\n            ? \"#f5c6cb\"\n            : \"#bee5eb\"\n        }`,\n      }}\n    >\n      {status === \"checking\" && \"⏳ \"}\n      {status === \"success\" && \"✅ \"}\n      {status === \"error\" && \"❌ \"}\n      {message}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"AAAA;;;;;;;;;CASC;;;;;AAID;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,eAAe,IAAA,qJAAe;IACpC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAClC;IAEF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAS;IAE/C,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY,aAAa,GAAG,CAAC;QAEnC,iDAAiD;QACjD,IAAI,CAAC,WAAW;YACd;QACF;QAEA,iCAAiC;QACjC,MAAM,gBAAgB;YACpB,UAAU;YACV,WAAW;YAEX,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,8BAA8B;oBACzD,QAAQ;oBACR,SAAS;wBACP,gBAAgB;oBAClB;oBACA,MAAM,KAAK,SAAS,CAAC;wBAAE;oBAAU;gBACnC;gBAEA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAEhC,IAAI,SAAS,EAAE,IAAI,KAAK,MAAM,KAAK,QAAQ;oBACzC,UAAU;oBACV,WAAW;gBACb,OAAO;oBACL,UAAU;oBACV,WAAW,KAAK,OAAO,IAAI;gBAC7B;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,+CAA+C;gBAC7D,UAAU;gBACV,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;KAAa;IAEjB,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,qBACE,8OAAC;QACC,OAAO;YACL,SAAS;YACT,QAAQ;YACR,cAAc;YACd,iBACE,WAAW,YACP,YACA,WAAW,UACX,YACA;YACN,OACE,WAAW,YACP,YACA,WAAW,UACX,YACA;YACN,QAAQ,CAAC,UAAU,EACjB,WAAW,YACP,YACA,WAAW,UACX,YACA,WACJ;QACJ;;YAEC,WAAW,cAAc;YACzB,WAAW,aAAa;YACxB,WAAW,WAAW;YACtB;;;;;;;AAGP"}}]
}